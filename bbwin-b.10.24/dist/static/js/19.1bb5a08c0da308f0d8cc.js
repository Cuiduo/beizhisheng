webpackJsonp([19],{"78V4":function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.report-container[data-v-18510be2] {\n  background-color: #e3f2f8;\n  margin-top: -3%;\n}\n.report-medical[data-v-18510be2] {\n  padding: 4% 5% 0 5%;\n}\n.report-title[data-v-18510be2] {\n  text-align: center;\n  font-size: 20px;\n}\n.report-button[data-v-18510be2] {\n  float: right;\n  margin-top: 4%;\n}\n.evaluation-container[data-v-18510be2] {\n  background-color: #e3f2f8;\n  margin-top: -3%;\n}\n.evaluation-medical[data-v-18510be2] {\n  padding: 4% 5% 0 5%;\n}\n.evaluation-button[data-v-18510be2] {\n  margin-top: 4%;\n}\n.evaluation-button-left[data-v-18510be2] {\n    float: left;\n}\n.evaluation-button-right[data-v-18510be2] {\n    float: right;\n}\n.filter-container[data-v-18510be2] {\n  width: 100%;\n  background-color: #fff;\n  margin-top: 2%;\n  border-radius: 10px;\n}\n.filter-container-radio[data-v-18510be2] {\n    margin-left: 5%;\n}\n.filter-container-a[data-v-18510be2] {\n    padding-left: 5%;\n}\n.filter-container-jokes[data-v-18510be2] {\n    line-height: 30px;\n    padding: 2%;\n}\n.filter-medical[data-v-18510be2] {\n  padding: 0 5% 10% 5%;\n  min-height: 445px;\n}\n.filter-results[data-v-18510be2] {\n  padding-top: 2%;\n}\n.filter-info[data-v-18510be2] {\n  padding-top: 5%;\n  height: 200px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position-y: bottom;\n  width: 100%;\n  z-index: -10;\n  zoom: 1;\n}\n.filter-info-basic[data-v-18510be2] {\n    margin-top: -2%;\n    width: 98%;\n    min-width: 680px;\n}\n.filter-info-line[data-v-18510be2] {\n    height: 1px;\n    background-color: #9ec3d061;\n    margin: 15px 5px;\n}\n.filter-avatarFrame[data-v-18510be2] {\n  background-color: #fff;\n  width: 130px;\n  height: 130px;\n  border-radius: 50%;\n  margin-top: -30px;\n  text-align: center;\n  border: 1px solid #eceff0;\n  -webkit-box-shadow: #a8b2b9 6px 0 30px -12px;\n  box-shadow: #a8b2b9 6px 0 30px -12px;\n}\n.filter-avatar[data-v-18510be2] {\n  width: 120%;\n  height: 117%;\n  margin-left: -10%;\n  margin-top: -16%;\n}\n.filter-text[data-v-18510be2] {\n  text-align: center;\n  font-size: 20px;\n  background-color: #f5f5f5;\n  color: #4f4f4f;\n  line-height: 60px;\n}\n.filter-chart[data-v-18510be2] {\n  padding: 5%;\n}\n.filter-chart-text[data-v-18510be2] {\n    text-align: center;\n    font-size: 20px;\n    background-color: #f5f5f5;\n    color: #4f4f4f;\n    line-height: 60px;\n}\n.filter-tips[data-v-18510be2] {\n  font-size: 18px;\n  color: #4f4f4f;\n  padding-bottom: 1%;\n}\n.filter-row[data-v-18510be2] {\n  margin-bottom: 4%;\n}\n.filter-card-container[data-v-18510be2] {\n  background: -webkit-gradient(linear, left top, right top, from(white), to(#f5f5f5));\n  background: linear-gradient(to right, white, #f5f5f5);\n}\n.filter-card-text[data-v-18510be2] {\n  padding: 16px;\n  text-align: center;\n  height: 80px;\n  line-height: 25px;\n}\n.filter-card-image[data-v-18510be2] {\n  width: 100%;\n  display: block;\n}\n.appBackground[data-v-18510be2] {\n  background-size: 100%;\n  background-repeat: no-repeat;\n  background-position-y: bottom;\n  width: 100%;\n  height: 100%;\n  z-index: -10;\n  zoom: 1;\n}\n",""])},Uatm:function(t,a,e){var n=e("78V4");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("56730932",n,!0)},uMZp:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("fZjL"),i=e.n(n),s=e("Dd8w"),o=e.n(s),r=e("NYxO"),l=e("UqIz"),d=e("NDWR"),c=e.n(d),h=e("8sSG"),u=e.n(h),v=e("xY4a"),g=e.n(v),f=e("K3ol"),b=e.n(f),p=e("dsaa"),m=e.n(p),y=e("vLgD");var w={data:function(){return{babyId:0,testId:0,itemRadio:[],appBackground:c.a,manBackground:u.a,womanBackground:g.a,background:u.a,manAvatar:b.a,womenAvatar:m.a,avatar:b.a,listData:{},pushData:{babyId:0,score:0},starts:{A:1,B:3,C:3,D:7,E:16,F:19,G:22,H:25,I:31,J:34,K:40,L:45,M:45,N:56,O:60,P:63,Q:67},startsMonth:{A:1,B:2,C:3,D:4,E:5,F:6,G:8,H:10,I:13,J:16,K:19,L:22,M:25,N:28,O:32,P:38,Q:42},startsMonths:[{A:1},{B:2},{C:3},{D:4},{E:5},{F:6},{G:8},{H:10},{I:13},{J:16},{K:19},{L:22},{M:25},{N:28},{O:32},{P:38},{Q:42}],score:0,topVal:0,typeSum:6,dialogVisible:!1,clickData:[],answerProcess:[],infoType:{},info:{},multipleSelection:[],answerPass:[],answerNotPass:[],notPass:!0,list:[],listLoading:!0,loading:null,title:void 0,lastValue:0,hasContact:[],contactArray:[],contactDot:[],temMonthAge:void 0,day:void 0,ageSection:void 0,onMonthAge:void 0,clickDataSum:0,notMeet:0}},computed:o()({},Object(r.b)(["hospitalData"])),components:{Breadcrumb:l.a},created:function(){this.babyId=this.$route.query.babyId,this.pushData.babyId=this.babyId,this.testId=parseInt(this.$route.query.testId),this.getTitle(),this.infoData(),this.fetchData()},methods:{getTitle:function(){for(var t in this.hospitalData)this.hospitalData[t].testId===this.testId&&(this.title=this.hospitalData[t].testName)},tableRowClassName:function(t){var a=t.row;t.rowIndex;return a.ordinal===this.temMonthAge?"warning-row":""},returnTop:function(){this.topVal=document.querySelector(".warning-row").getBoundingClientRect().top,window.scrollTo(0,this.topVal)},findKey:function(t){var a=this,e="";return i()(this.starts).find(function(n){a.starts[n]===t&&(e+=n)}),e},objectSpanMethod:function(t){t.row,t.column;var a=t.rowIndex,e=t.columnIndex;if(this.contactArray&&0===e){var n=this.contactArray[a];return{rowspan:n,colspan:n>0?1:0}}},removeArray:function(t,a){var e=t.indexOf(a);e>=0&&t.splice(e,1)},passReasons:function(t,a){1===parseInt(a)?(this.answerPass.push(t.ordinal),this.removeArray(this.answerNotPass,t.ordinal)):(this.answerNotPass.push(t.ordinal),this.removeArray(this.answerPass,t.ordinal),this.notPass&&t.ordinal<this.temMonthAge+3&&(this.temMonthAge=this.onMonthAge,this.tableRowClassName,window.scrollTo(0,this.topVal-300),this.notPass=!1)),this.isAnswerPass(this.answerNotPass,4)>0&&(this.$notify({title:"警告",message:"检查结束，提交中...",type:"warning"}),this.calculateFractions(),this.saveData())},isAnswerPass:function(t,a){for(var e=this.bubble(t),n=0,i=0,s=0,o=!0,r=!0,l=0;l<e.length;l++)n-e[l]==-1?(o&&(s=n,o=!1),++i>=a&&(r=!1)):n-e[l]<-1&&r&&(i=0),n=e[l];return i>=a?s:0},setAnswerPass:function(t){for(var a=1;a<t;a++)this.$set(this.itemRadio,a,"1")},bubble:function(t){for(var a=void 0,e=0;e<t.length;e++)for(var n=0;n<t.length;n++)t[n]>t[n+1]&&(a=t[n],t[n]=t[n+1],t[n+1]=a);return t},handleFailedDataSave:function(t,a){this.$set(this.pushData,"desc"+a.ordinal,t)},handleSelectionChange:function(t){this.multipleSelection=t},fetchData:function(){var t,a=this;this.listLoading=!0,(t=this.testId,Object(y.a)({url:"/check/getTestQuestions",method:"get",params:{testId:t}})).then(function(t){var e=t.data;a.list=e,a.list.filter(function(t,e){var n=a.findKey(t.ordinal);n&&(a.lastValue=n),t.starting=""!==n?n:a.lastValue,a.answerProcess.push(e+1),a.$set(a.pushData,"desc"+t.ordinal,""),a.itemRadio.push("score"+t.ordinal)}),a._normalize(a.list),a.listLoading=!1,setTimeout(function(){a.returnTop()},3e3)})},_normalize:function(t){for(var a in t)0===parseInt(a)?(this.contactArray.push(1),this.contactDot=0):t[a].starting===t[a-1].starting?(this.contactArray[this.contactDot]+=1,this.contactArray.push(0)):(this.contactArray.push(1),this.contactDot=a)},infoData:function(){var t,a=this;(t=this.babyId,Object(y.a)({url:"/common/recordDetail",method:"get",params:{babyId:t}})).then(function(t){a.info=t.data,a.day=a.getElapsedDay(a.info.babyBirthday),a.getAgeSection(),a.avatar=1===t.data.babyGenderName?a.manAvatar:a.womenAvatar,a.background=1===t.data.babyGenderName?a.manBackground:a.womanBackground,i()(a.starts).find(function(t){a.starts[a.ageSection]>a.starts[t]&&(a.onMonthAge=a.starts[t])}),a.temMonthAge=a.starts[a.ageSection]})},getElapsedDay:function(t){var a=Date.parse(new Date),e=Date.parse(t);return parseInt((a-e)/864e5)},getAgeSection:function(){this.day>=16&&this.day<=45?this.ageSection="A":this.day>=46&&this.day<=75?this.ageSection="B":this.day>=76&&this.day<=105?this.ageSection="C":this.day>=106&&this.day<=135?this.ageSection="D":this.day>=136&&this.day<=165?this.ageSection="E":this.day>=166&&this.day<=195?this.ageSection="F":this.day>=196&&this.day<=270?this.ageSection="F":this.day>=271&&this.day<=330?this.ageSection="H":this.day>=331&&this.day<=405?this.ageSection="I":this.day>=406&&this.day<=495?this.ageSection="J":this.day>=496&&this.day<=585?this.ageSection="K":this.day>=586&&this.day<=675?this.ageSection="L":this.day>=676&&this.day<=765?this.ageSection="M":this.day>=766&&this.day<=855?this.ageSection="N":this.day>=856&&this.day<=990?this.ageSection="O":this.day>=991&&this.day<=1170?this.ageSection="P":this.day>=1171&&this.day<=1275&&(this.ageSection="Q")},preview:function(){this.calculateFractions(),this.dialogVisible=!0},calculateFractions:function(){for(var t in this.pushData.score=this.temMonthAge-1,this.list){var a=parseInt(this.itemRadio[this.list[t].ordinal]);a&&(this.pushData.score+=a)}},questionsNumber:function(){return this.answerPass.length>0},handleCreateSave:function(){var t=this;if(!this.questionsNumber())return this.$message({showClose:!0,message:"请答题!",type:"warning"}),!1;this.calculateFractions(),this.$confirm("确定保存本测评?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.saveData()}).catch(function(){})},saveData:function(){var t,a=this;this.loading=!0,console.log(this.pushData),(t=this.pushData,Object(y.a)({url:"/check/submitCognize",method:"post",data:o()({},t)})).then(function(t){a.$message({message:"提交成功!",type:"success",duration:1e3,onClose:function(){a.goPage(t.data)}}),a.loading=!1}).catch(function(t){a.loading=!1,a.$message({showClose:!0,message:t,type:"error"})})},goPage:function(t){this.$router.push({path:"/report/index",query:{id:t,testId:this.testId}})}}},_={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"evaluation-container"},[e("div",{staticClass:"evaluation-medical"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("breadcrumb")],1)],1),t._v(" "),e("div",{staticClass:"report-title"},[e("span",[t._v(t._s(t.title))])])],1),t._v(" "),e("div",{staticClass:"appBackground",style:{backgroundImage:"url("+t.appBackground+")"}},[e("div",{staticClass:"filter-medical"},[e("div",{staticClass:"filter-container"},[e("div",{staticClass:"filter-info",style:{backgroundImage:"url("+t.background+")"}},[e("el-row",{staticStyle:{"padding-left":"25%"},attrs:{gutter:20}},[e("el-col",{staticClass:"filter-info-basic",attrs:{span:16}},[e("h3",[t._v("小儿基本信息")]),t._v(" "),e("div",{staticClass:"filter-info-line"}),t._v(" "),e("div",{staticClass:"divTable"},[e("div",{staticClass:"divTable-row divTable-row-header"},[e("div",{staticClass:"divTable-content"},[t._v("姓名")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("性别")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("出生日期")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("月龄")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("父亲姓名")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("母亲姓名")])]),t._v(" "),e("div",{staticClass:"divTable-row"},[e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.babyName))]),t._v(" "),e("div",{staticClass:"divTable-content"},[1===t.info.babyGenderName?e("span",[t._v("男")]):e("span",[t._v("女")])]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.babyBirthday))]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.monthAge))]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.fatherName))]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.motherName))])])])])],1)],1),t._v(" "),e("div",{staticClass:"filter-results"},[e("div",{staticClass:"filter-results"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticClass:"cognizeTab tab-evaluation",attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","empty-text":"暂无数据","span-method":t.objectSpanMethod,"row-class-name":t.tableRowClassName},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{prop:"ordinal",label:"起点",align:"center","header-align":"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.row.starting))]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"ordinal",label:"NO.",align:"center","header-align":"center",width:"100px"}}),t._v(" "),e("el-table-column",{attrs:{prop:"description",label:"项目",width:"600px"}}),t._v(" "),e("el-table-column",{attrs:{label:"得分",align:"center","header-align":"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-row",[e("el-radio-group",{on:{change:function(e){t.passReasons(a.row,e)}},model:{value:t.itemRadio[a.row.ordinal],callback:function(e){t.$set(t.itemRadio,a.row.ordinal,e)},expression:"itemRadio[scope.row.ordinal]"}},[e("el-radio-button",{attrs:{label:"1"}},[t._v("A")]),t._v(" "),e("el-radio-button",{attrs:{label:"0"}},[t._v("B")])],1)],1)]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"备注",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{type:"textarea",placeholder:"请输入",autosize:{minRows:2,maxRows:6}},on:{change:function(e){t.handleFailedDataSave(e,a.row)}}})]}}])})],1)],1)])]),t._v(" "),e("div",{staticClass:"evaluation-button"},[e("div",{staticClass:"evaluation-button-left"},[e("el-button",{attrs:{type:"primary"},on:{click:t.preview}},[t._v("预览")])],1),t._v(" "),e("div",{staticClass:"evaluation-button-right"},[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleCreateSave}},[t._v("保存")])],1)])])]),t._v(" "),e("el-dialog",{attrs:{title:"预览",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("el-form",{staticClass:"preview",attrs:{"label-position":"right","label-width":"55%"}},[e("el-form-item",{attrs:{label:"姓名："}},[t._v(t._s(t.info.babyName))]),t._v(" "),e("el-form-item",{attrs:{label:"月龄："}},[t._v(t._s(t.info.monthAge))]),t._v(" "),e("el-form-item",{attrs:{label:"得分："}},[t._v(t._s(t.pushData.score))])],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var x=e("VU/8")(w,_,!1,function(t){e("Uatm")},"data-v-18510be2",null);a.default=x.exports}});