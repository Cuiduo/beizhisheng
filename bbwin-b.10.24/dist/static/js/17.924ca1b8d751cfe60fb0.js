webpackJsonp([17],{"4KX/":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("Dd8w"),i=e.n(n),s=e("NYxO"),o=e("UqIz"),r=e("NDWR"),l=e.n(r),d=e("8sSG"),c=e.n(d),f=e("xY4a"),h=e.n(f),u=e("K3ol"),v=e.n(u),p=e("dsaa"),g=e.n(p),b=e("vLgD");var m={data:function(){return{babyId:0,testId:0,itemRadio:[],appBackground:l.a,manBackground:c.a,womanBackground:h.a,background:c.a,manAvatar:v.a,womenAvatar:g.a,avatar:v.a,listData:{},pushData:{babyId:0,a1:0,a2:0,a3:0,a4:0,a5:0,a6:0},score:0,typeSum:6,dialogVisible:!1,clickData:[],answerProcess:[],infoType:{},info:{},multipleSelection:[],isHighlight:!1,list:[],listLoading:!0,loading:null,title:void 0}},computed:i()({},Object(s.b)(["hospitalData"])),components:{Breadcrumb:o.a},created:function(){this.babyId=this.$route.query.babyId,this.pushData.babyId=this.babyId,this.testId=parseInt(this.$route.query.testId),this.getTitle(),this.infoData(),this.checkType(),this.fetchData()},methods:{setCurrent:function(t){this.$refs.singleTable.setCurrentRow(t)},getTitle:function(){for(var t in this.hospitalData)this.hospitalData[t].testId===this.testId&&(this.title=this.hospitalData[t].testName)},removeChinese:function(t){if(null!=t&&""!==t){var a=new RegExp("&mdash;|[`~!@#%$^&*()=+\\|{}':;\",\\[\\].<>/?~！@#￥…&*（）＆×～（）—＋＝＂＜＞，．／＼｛｝＿《》＠—|{}【】‘；：”“'。，、？]","g");return t.replace(/[\u4e00-\u9fa5]/g,"").replace(a,"")}return""},checkType:function(){var t=this;Object(b.a)({url:"/common/checkType",method:"get"}).then(function(a){t.infoType=a.data})},passReasons:function(t){var a=this.answerProcess.indexOf(t.ordinal);a>=0&&this.answerProcess.splice(a,1)},handleFailedDataSave:function(t,a){this.$set(this.pushData,"desc"+a.ordinal,t)},handleSelectionChange:function(t){this.multipleSelection=t},fetchData:function(){var t,a=this;this.listLoading=!0,(t=this.testId,Object(b.a)({url:"/check/getTestQuestions",method:"get",params:{testId:t}})).then(function(t){var e=t.data;a.list=e,a.list.filter(function(t,e){a.answerProcess.push(e+1),a.$set(a.pushData,"desc"+t.ordinal,""),a.itemRadio.push("score"+t.ordinal)}),a.listLoading=!1})},infoData:function(){var t,a=this;(t=this.babyId,Object(b.a)({url:"/common/recordDetail",method:"get",params:{babyId:t}})).then(function(t){a.info=t.data,a.avatar=1===t.data.babyGenderName?a.manAvatar:a.womenAvatar,a.background=1===t.data.babyGenderName?a.manBackground:a.womanBackground})},preview:function(){if(this.answerProcess.length>0)return this.$message({showClose:!0,message:"有题目未完成!",type:"warning"}),!1;this.calculateFractions(),this.dialogVisible=!0},calculateFractions:function(){for(var t in this.pushData.a1=0,this.pushData.a2=0,this.pushData.a3=0,this.pushData.a4=0,this.pushData.a5=0,this.pushData.a6=0,this.list){var a=parseInt(this.itemRadio[this.list[t].ordinal]),e=this.list[t].type;a&&(31===e?this.pushData.a1+=a:32===e?this.pushData.a2+=a:33===e?this.pushData.a3+=a:34===e?this.pushData.a4+=a:35===e?this.pushData.a5+=a:36===e&&(this.pushData.a6+=a))}},tableRowClassName:function(t){var a=t.row;t.rowIndex;if(this.isHighlight)for(var e in this.answerProcess){if(this.answerProcess.indexOf(this.answerProcess[e])>=0&&a.ordinal===this.answerProcess[e])return"warning-row"}},handleCreateSave:function(){var t=this;if(this.answerProcess.length>0)return this.isHighlight=!0,this.tableRowClassName,this.$message({showClose:!0,message:"有题目未完成!",type:"warning"}),!1;this.calculateFractions(),this.$confirm("确定保存本测评?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;t.loading=!0,(a=t.pushData,Object(b.a)({url:"/check/submit50",method:"post",data:i()({},a)})).then(function(a){t.$message({message:"提交成功!",type:"success",duration:1e3,onClose:function(){t.goPage(a.data)}}),t.loading=!1}).catch(function(a){t.loading=!1,t.$message({showClose:!0,message:a,type:"error"})})}).catch(function(){})},goPage:function(t){this.$router.push({path:"/report/index",query:{id:t,testId:this.testId}})}}},_={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"evaluation-container"},[e("div",{staticClass:"evaluation-medical"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("breadcrumb")],1)],1),t._v(" "),e("div",{staticClass:"report-title"},[e("span",[t._v(t._s(t.title))])])],1),t._v(" "),e("div",{staticClass:"appBackground",style:{backgroundImage:"url("+t.appBackground+")"}},[e("div",{staticClass:"filter-medical"},[e("div",{staticClass:"filter-container"},[e("div",{staticClass:"filter-info",style:{backgroundImage:"url("+t.background+")"}},[e("el-row",{staticStyle:{"padding-left":"25%"},attrs:{gutter:20}},[e("el-col",{staticClass:"filter-info-basic",attrs:{span:16}},[e("h3",[t._v("小儿基本信息")]),t._v(" "),e("div",{staticClass:"filter-info-line"}),t._v(" "),e("div",{staticClass:"divTable"},[e("div",{staticClass:"divTable-row divTable-row-header"},[e("div",{staticClass:"divTable-content"},[t._v("姓名")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("性别")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("出生日期")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("月龄")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("父亲姓名")]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v("母亲姓名")])]),t._v(" "),e("div",{staticClass:"divTable-row"},[e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.babyName))]),t._v(" "),e("div",{staticClass:"divTable-content"},[1===t.info.babyGenderName?e("span",[t._v("男")]):e("span",[t._v("女")])]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.babyBirthday))]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.monthAge))]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.fatherName))]),t._v(" "),e("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.motherName))])])])])],1)],1),t._v(" "),e("div",{staticClass:"filter-results"},[e("div",{staticClass:"filter-results"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],ref:"singleTable",attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","empty-text":"暂无数据","row-class-name":t.tableRowClassName},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{prop:"ordinal",label:"NO.",align:"center","header-align":"center",width:"60px"}}),t._v(" "),e("el-table-column",{attrs:{prop:"qid",label:"项目",align:"center","header-align":"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t.removeChinese(t.infoType[a.row.type])))]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"description",label:"测试题目",width:"600px"}}),t._v(" "),e("el-table-column",{attrs:{label:"符合",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("p",[e("el-radio",{staticClass:"success_radio",attrs:{label:"1"},on:{change:function(e){t.passReasons(a.row)}},model:{value:t.itemRadio[a.row.ordinal],callback:function(e){t.$set(t.itemRadio,a.row.ordinal,e)},expression:"itemRadio[scope.row.ordinal]"}},[t._v("符合")])],1)]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"不符合",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("p",[e("el-radio",{staticClass:"filter_radio",attrs:{label:"0"},on:{change:function(e){t.passReasons(a.row)}},model:{value:t.itemRadio[a.row.ordinal],callback:function(e){t.$set(t.itemRadio,a.row.ordinal,e)},expression:"itemRadio[scope.row.ordinal]"}},[t._v("不符合")])],1)]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"儿童回答答案",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{type:"textarea",placeholder:"请输入",autosize:{minRows:2,maxRows:6}},on:{change:function(e){t.handleFailedDataSave(e,a.row)}}})]}}])})],1)],1)])]),t._v(" "),e("div",{staticClass:"filter-container filter-container-jokes"},[t._v("   公鸡和免子、鸭子、松鼠住在一起，有一天早上，兔子来找公鸡说:“我要上街买萝卜,借一只篮子给我用吧”! 公鸡说:“我自己要用，不借”。 中午，鸭子来找公鸡说:“公鸡哥哥，你嘴巴尖尖的，帮我解一下衣服上的扣子吧!”公鸡说:“我要吃饭了，没有空”。 到了晚上，松鼠米找公鸡说:“我明天早上要上山砍柴，你早一些叫我起床吧”。公鸡说:“我没有力气，不高兴叫”。 过了一天，刮大风、下大雨，把公鸡的屋项掀掉了，  公鸡急得又跳又叫，正在着急的时候，兔子，鸭子，松鼠一起赶来了，帮助公鸡修理屋顶。 没过多久，风停了，雨住了，屋顶也修好了，公鸡看着这一切，脸一下子红了。  ")]),t._v(" "),e("div",{staticClass:"evaluation-button"},[e("div",{staticClass:"evaluation-button-left"},[e("el-button",{attrs:{type:"primary"},on:{click:t.preview}},[t._v("预览")])],1),t._v(" "),e("div",{staticClass:"evaluation-button-right"},[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleCreateSave}},[t._v("保存")])],1)])])]),t._v(" "),e("el-dialog",{attrs:{title:"预览",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("el-form",{staticClass:"preview",attrs:{"label-position":"right","label-width":"55%"}},[e("el-form-item",{attrs:{label:"SC："}},[t._v(t._s(t.pushData.a1))]),t._v(" "),e("el-form-item",{attrs:{label:"L："}},[t._v(t._s(t.pushData.a2))]),t._v(" "),e("el-form-item",{attrs:{label:"M："}},[t._v(t._s(t.pushData.a3))]),t._v(" "),e("el-form-item",{attrs:{label:"E："}},[t._v(t._s(t.pushData.a4))]),t._v(" "),e("el-form-item",{attrs:{label:"T："}},[t._v(t._s(t.pushData.a5))]),t._v(" "),e("el-form-item",{attrs:{label:"GK："}},[t._v(t._s(t.pushData.a6))])],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var w=e("VU/8")(m,_,!1,function(t){e("fKpn")},"data-v-3e303afe",null);a.default=w.exports},LtsH:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.report-container[data-v-3e303afe] {\n  background-color: #e3f2f8;\n  margin-top: -3%;\n}\n.report-medical[data-v-3e303afe] {\n  padding: 4% 5% 0 5%;\n}\n.report-title[data-v-3e303afe] {\n  text-align: center;\n  font-size: 20px;\n}\n.report-button[data-v-3e303afe] {\n  float: right;\n  margin-top: 4%;\n}\n.evaluation-container[data-v-3e303afe] {\n  background-color: #e3f2f8;\n  margin-top: -3%;\n}\n.evaluation-medical[data-v-3e303afe] {\n  padding: 4% 5% 0 5%;\n}\n.evaluation-button[data-v-3e303afe] {\n  margin-top: 4%;\n}\n.evaluation-button-left[data-v-3e303afe] {\n    float: left;\n}\n.evaluation-button-right[data-v-3e303afe] {\n    float: right;\n}\n.filter-container[data-v-3e303afe] {\n  width: 100%;\n  background-color: #fff;\n  margin-top: 2%;\n  border-radius: 10px;\n}\n.filter-container-radio[data-v-3e303afe] {\n    margin-left: 5%;\n}\n.filter-container-a[data-v-3e303afe] {\n    padding-left: 5%;\n}\n.filter-container-jokes[data-v-3e303afe] {\n    line-height: 30px;\n    padding: 2%;\n}\n.filter-medical[data-v-3e303afe] {\n  padding: 0 5% 10% 5%;\n  min-height: 445px;\n}\n.filter-results[data-v-3e303afe] {\n  padding-top: 2%;\n}\n.filter-info[data-v-3e303afe] {\n  padding-top: 5%;\n  height: 200px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position-y: bottom;\n  width: 100%;\n  z-index: -10;\n  zoom: 1;\n}\n.filter-info-basic[data-v-3e303afe] {\n    margin-top: -2%;\n    /*min-width: 895px;*/\n    width: 98%;\n    min-width: 680px;\n}\n.filter-info-line[data-v-3e303afe] {\n    height: 1px;\n    background-color: #9ec3d061;\n    margin: 15px 5px;\n}\n.filter-avatarFrame[data-v-3e303afe] {\n  background-color: #fff;\n  width: 130px;\n  height: 130px;\n  border-radius: 50%;\n  margin-top: -30px;\n  text-align: center;\n  border: 1px solid #eceff0;\n  -webkit-box-shadow: #a8b2b9 6px 0 30px -12px;\n  box-shadow: #a8b2b9 6px 0 30px -12px;\n}\n.filter-avatar[data-v-3e303afe] {\n  width: 120%;\n  height: 117%;\n  margin-left: -10%;\n  margin-top: -16%;\n}\n.filter-text[data-v-3e303afe] {\n  text-align: center;\n  font-size: 20px;\n  background-color: #f5f5f5;\n  color: #4f4f4f;\n  line-height: 60px;\n}\n.filter-chart[data-v-3e303afe] {\n  padding: 5%;\n}\n.filter-chart-text[data-v-3e303afe] {\n    text-align: center;\n    font-size: 20px;\n    background-color: #f5f5f5;\n    color: #4f4f4f;\n    line-height: 60px;\n}\n.filter-tips[data-v-3e303afe] {\n  font-size: 18px;\n  color: #4f4f4f;\n  padding-bottom: 1%;\n}\n.filter-row[data-v-3e303afe] {\n  margin-bottom: 4%;\n}\n.filter-card-container[data-v-3e303afe] {\n  background: -webkit-gradient(linear, left top, right top, from(white), to(#f5f5f5));\n  background: linear-gradient(to right, white, #f5f5f5);\n}\n.filter-card-text[data-v-3e303afe] {\n  padding: 16px;\n  text-align: center;\n  height: 80px;\n  line-height: 25px;\n}\n.filter-card-image[data-v-3e303afe] {\n  width: 100%;\n  display: block;\n}\n.appBackground[data-v-3e303afe] {\n  background-size: 100%;\n  background-repeat: no-repeat;\n  background-position-y: bottom;\n  width: 100%;\n  height: 100%;\n  z-index: -10;\n  zoom: 1;\n}\n",""])},fKpn:function(t,a,e){var n=e("LtsH");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("56a263bb",n,!0)}});