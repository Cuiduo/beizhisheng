webpackJsonp([15],{"3RyS":function(t,a,n){var e=n("T1JZ");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);n("rjj0")("59aa09ff",e,!0)},E74y:function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=n("Dd8w"),i=n.n(e),o=n("NYxO"),s=n("UqIz"),r=n("NDWR"),l=n.n(r),d=n("8sSG"),c=n.n(d),h=n("xY4a"),f=n.n(h),u=n("K3ol"),p=n.n(u),v=n("dsaa"),g=n.n(v),m=n("vLgD");var b={data:function(){return{babyId:0,testId:0,itemRadio:[],appBackground:l.a,manBackground:c.a,womanBackground:f.a,background:c.a,manAvatar:p.a,womenAvatar:g.a,avatar:p.a,listData:{},pushData:{babyId:0,a1:0,a2:0,a3:0,a4:0,a5:0,a6:0},map:[1,20,42,64,81,97,114],ends:[19,41,63,80,96,113],ageLine:[6,24,42,60,78,102,126],monthData:{1:"6月-1岁11月",2:"2岁-3岁5月",3:"3岁6月-4岁11月",4:"5岁-6岁5月",5:"6岁6月-8岁5月",6:"8岁6月-10岁5月",7:"10岁6月- 17岁"},temporaryData:{dialogTitle:void 0,dialogFormVisible:!1,domains:[{value:""}],failRadio:void 0,ordinal:void 0,otherReasons:void 0,otherReasons1:void 0},score:0,typeSum:8,dialogVisible:!1,clickData:[],answerPass:[],answerNotPass:[],info:{},infoType:{},multipleSelection:[],list:[],listLoading:!0,loading:null,title:void 0,topVal:0,temMonthAge:void 0}},computed:i()({},Object(o.b)(["hospitalData"])),components:{Breadcrumb:s.a},created:function(){this.babyId=this.$route.query.babyId,this.pushData.babyId=this.babyId,this.testId=parseInt(this.$route.query.testId),this.getTitle(),this.infoData(),this.checkType(),this.fetchData()},methods:{getTitle:function(){for(var t in this.hospitalData)this.hospitalData[t].testId===this.testId&&(this.title=this.hospitalData[t].testName)},objectSpanMethod:function(t){t.row,t.column,t.rowIndex,t.columnIndex},removeChinese:function(t){if(null!=t&&""!==t)return t.split("（")[0]},checkType:function(){var t=this;Object(m.a)({url:"/common/checkType",method:"get"}).then(function(a){t.infoType=a.data})},removeArray:function(t,a){var n=t.indexOf(a);n>=0&&t.splice(n,1)},passReasons:function(t,a){0===a?(this.answerPass.push(t.ordinal),this.removeArray(this.answerNotPass,t.ordinal)):(this.answerNotPass.push(t.ordinal),this.removeArray(this.answerPass,t.ordinal),t.ordinal<this.temMonthAge+10&&(this.temMonthAge+=-10,this.tableRowClassName,this.topVal+=-800,window.scrollTo(0,this.topVal)));var n=this.isAnswerPass(this.answerPass);n>0&&this.setAnswerPass(n),this.isAnswerPass(this.answerNotPass)>0&&(this.$notify({title:"警告",message:"检查结束，提交中...",type:"warning"}),this.calculateFractions(),this.saveData())},isAnswerPass:function(t){for(var a=this.bubble(t),n=0,e=0,i=0,o=!0,s=!0,r=0;r<a.length;r++)n-a[r]==-1?(o&&(i=n,o=!1),++e>=9&&(s=!1)):n-a[r]<-1&&s&&(e=0),n=a[r];return e>=9?i:0},setAnswerPass:function(t){for(var a=1;a<t;a++)this.$set(this.itemRadio,a,"1")},bubble:function(t){for(var a=void 0,n=0;n<t.length;n++)for(var e=0;e<t.length;e++)t[e]>t[e+1]&&(a=t[e],t[e]=t[e+1],t[e+1]=a);return t},handleFailedDataSave:function(t,a){this.$set(this.pushData,"desc"+a.ordinal,t)},tableRowClassName:function(t){return t.row.ordinal===this.temMonthAge?"warning-row":""},returnTop:function(){this.topVal=document.querySelector(".warning-row").getBoundingClientRect().top,window.scrollTo(0,this.topVal)},handleSelectionChange:function(t){this.multipleSelection=t},fetchData:function(){var t,a=this;this.listLoading=!0,(t=this.testId,Object(m.a)({url:"/check/getTestQuestions",method:"get",params:{testId:t}})).then(function(t){a.list=t.data,a.list.filter(function(t){a.$set(a.pushData,"desc"+t.ordinal,""),a.itemRadio.push("score"+t.ordinal)}),a.list.splice(0,0,{ordinal:a.monthData[1],month:1}),a.list.splice(20,0,{ordinal:a.monthData[2],month:2}),a.list.splice(43,0,{ordinal:a.monthData[3],month:3}),a.list.splice(66,0,{ordinal:a.monthData[4],month:4}),a.list.splice(84,0,{ordinal:a.monthData[5],month:5}),a.list.splice(101,0,{ordinal:a.monthData[6],month:6}),a.list.splice(119,0,{ordinal:a.monthData[7],month:7}),a.listLoading=!1,setTimeout(function(){a.returnTop()},3e3)})},infoData:function(){var t,a=this;(t=this.babyId,Object(m.a)({url:"/common/recordDetail",method:"get",params:{babyId:t}})).then(function(t){a.info=t.data,a.avatar=1===t.data.babyGenderName?a.manAvatar:a.womenAvatar,a.background=1===t.data.babyGenderName?a.manBackground:a.womanBackground,a.temMonthAge=a.getRange().start})},getRange:function(){var t=parseInt(this.info.monthAge),a={start:0,end:0};return t<24?(a.start=1,a.end=19):t<42?(a.start=20,a.end=41):t<60?(a.start=42,a.end=63):t<78?(a.start=64,a.end=80):t<102?(a.start=81,a.end=96):t<126?(a.start=97,a.end=113):(a.start=114,a.end=132),a},preview:function(){this.calculateFractions(),this.dialogVisible=!0},calculateFractions:function(){for(var t in this.pushData.a1=0,this.pushData.a2=0,this.pushData.a3=0,this.pushData.a4=0,this.pushData.a5=0,this.pushData.a6=0,this.list){var a=parseInt(this.itemRadio[this.list[t].ordinal]),n=this.list[t].type;a&&(41===n?this.pushData.a1+=a:42===n?this.pushData.a2+=a:43===n?this.pushData.a3+=a:44===n?this.pushData.a4+=a:45===n?this.pushData.a5+=a:46===n&&(this.pushData.a6+=a))}},questionsNumber:function(){return this.answerPass.length>0},handleCreateSave:function(){var t=this;if(!this.questionsNumber())return this.$message({showClose:!0,message:"请答题!",type:"warning"}),!1;this.calculateFractions(),this.$confirm("确定保存本测评?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.saveData()}).catch(function(){})},saveData:function(){var t,a=this;this.loading=!0,(t=this.pushData,Object(m.a)({url:"/check/submit132",method:"post",data:i()({},t)})).then(function(t){a.$message({message:"提交成功!",type:"success",duration:1e3,onClose:function(){a.goPage(t.data)}}),a.loading=!1}).catch(function(t){a.loading=!1,a.$message({showClose:!0,message:t,type:"error"})})},goPage:function(t){this.$router.push({path:"/report/index",query:{id:t,testId:this.testId}})}}},w={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"evaluation-container"},[n("div",{staticClass:"evaluation-medical"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("breadcrumb")],1)],1),t._v(" "),n("div",{staticClass:"report-title"},[n("span",[t._v(t._s(t.title))])])],1),t._v(" "),n("div",{staticClass:"appBackground",style:{backgroundImage:"url("+t.appBackground+")"}},[n("div",{staticClass:"filter-medical"},[n("div",{staticClass:"filter-container"},[n("div",{staticClass:"filter-info",style:{backgroundImage:"url("+t.background+")"}},[n("el-row",{staticStyle:{"padding-left":"25%"},attrs:{gutter:20}},[n("el-col",{staticClass:"filter-info-basic",attrs:{span:16}},[n("h3",[t._v("小儿基本信息")]),t._v(" "),n("div",{staticClass:"filter-info-line"}),t._v(" "),n("div",{staticClass:"divTable"},[n("div",{staticClass:"divTable-row divTable-row-header"},[n("div",{staticClass:"divTable-content"},[t._v("姓名")]),t._v(" "),n("div",{staticClass:"divTable-content"},[t._v("性别")]),t._v(" "),n("div",{staticClass:"divTable-content"},[t._v("出生日期")]),t._v(" "),n("div",{staticClass:"divTable-content"},[t._v("月龄")]),t._v(" "),n("div",{staticClass:"divTable-content"},[t._v("父亲姓名")]),t._v(" "),n("div",{staticClass:"divTable-content"},[t._v("母亲姓名")])]),t._v(" "),n("div",{staticClass:"divTable-row"},[n("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.babyName))]),t._v(" "),n("div",{staticClass:"divTable-content"},[1===t.info.babyGenderName?n("span",[t._v("男")]):n("span",[t._v("女")])]),t._v(" "),n("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.babyBirthday))]),t._v(" "),n("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.monthAge))]),t._v(" "),n("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.fatherName))]),t._v(" "),n("div",{staticClass:"divTable-content"},[t._v(t._s(t.info.motherName))])])])])],1)],1),t._v(" "),n("div",{staticClass:"filter-results"},[n("div",{staticClass:"filter-results"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","empty-text":"暂无数据","span-method":t.objectSpanMethod,"row-class-name":t.tableRowClassName},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{prop:"ordinal",label:"No.",align:"center","header-align":"center",width:"130px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"qid",label:"项目",align:"center","header-align":"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t.removeChinese(t.infoType[a.row.type])))]}}])},[t._v(">\n                ")]),t._v(" "),n("el-table-column",{attrs:{prop:"description",label:"测试题目",width:"600px"}}),t._v(" "),n("el-table-column",{attrs:{label:"符合",align:"center","header-align":"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.qid?n("p",[n("el-radio",{staticClass:"success_radio",attrs:{label:"1"},on:{change:function(n){t.passReasons(a.row,0)}},model:{value:t.itemRadio[a.row.ordinal],callback:function(n){t.$set(t.itemRadio,a.row.ordinal,n)},expression:"itemRadio[scope.row.ordinal]"}},[t._v("符合")])],1):t._e()]}}])},[t._v(">\n                ")]),t._v(" "),n("el-table-column",{attrs:{label:"不符合",align:"center","header-align":"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.qid?n("p",[n("el-radio",{staticClass:"filter_radio",attrs:{label:"0"},on:{change:function(n){t.passReasons(a.row,1)}},model:{value:t.itemRadio[a.row.ordinal],callback:function(n){t.$set(t.itemRadio,a.row.ordinal,n)},expression:"itemRadio[scope.row.ordinal]"}},[t._v("不符合")])],1):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"儿童回答答案",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.qid?n("el-input",{attrs:{type:"textarea",placeholder:"请输入",autosize:{minRows:2,maxRows:6}},on:{change:function(n){t.handleFailedDataSave(n,a.row)}}}):t._e()]}}])})],1)],1)])]),t._v(" "),n("div",{staticClass:"evaluation-button"},[n("div",{staticClass:"evaluation-button-left"},[n("el-button",{attrs:{type:"primary"},on:{click:t.preview}},[t._v("预览")])],1),t._v(" "),n("div",{staticClass:"evaluation-button-right"},[n("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleCreateSave}},[t._v("保存")])],1)])])]),t._v(" "),n("el-dialog",{attrs:{title:"预览",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(a){t.dialogVisible=a}}},[n("el-form",{staticClass:"preview",attrs:{"label-position":"right","label-width":"55%"}},[n("el-form-item",{attrs:{label:"SH："}},[t._v(t._s(t.pushData.a1))]),t._v(" "),n("el-form-item",{attrs:{label:"L："}},[t._v(t._s(t.pushData.a2))]),t._v(" "),n("el-form-item",{attrs:{label:"O："}},[t._v(t._s(t.pushData.a3))]),t._v(" "),n("el-form-item",{attrs:{label:"C："}},[t._v(t._s(t.pushData.a4))]),t._v(" "),n("el-form-item",{attrs:{label:"S："}},[t._v(t._s(t.pushData.a5))]),t._v(" "),n("el-form-item",{attrs:{label:"SD："}},[t._v(t._s(t.pushData.a6))])],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var _=n("VU/8")(b,w,!1,function(t){n("3RyS")},"data-v-5a65d09f",null);a.default=_.exports},T1JZ:function(t,a,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.report-container[data-v-5a65d09f] {\n  background-color: #e3f2f8;\n  margin-top: -3%;\n}\n.report-medical[data-v-5a65d09f] {\n  padding: 4% 5% 0 5%;\n}\n.report-title[data-v-5a65d09f] {\n  text-align: center;\n  font-size: 20px;\n}\n.report-button[data-v-5a65d09f] {\n  float: right;\n  margin-top: 4%;\n}\n.evaluation-container[data-v-5a65d09f] {\n  background-color: #e3f2f8;\n  margin-top: -3%;\n}\n.evaluation-medical[data-v-5a65d09f] {\n  padding: 4% 5% 0 5%;\n}\n.evaluation-button[data-v-5a65d09f] {\n  margin-top: 4%;\n}\n.evaluation-button-left[data-v-5a65d09f] {\n    float: left;\n}\n.evaluation-button-right[data-v-5a65d09f] {\n    float: right;\n}\n.filter-container[data-v-5a65d09f] {\n  width: 100%;\n  background-color: #fff;\n  margin-top: 2%;\n  border-radius: 10px;\n}\n.filter-container-radio[data-v-5a65d09f] {\n    margin-left: 5%;\n}\n.filter-container-a[data-v-5a65d09f] {\n    padding-left: 5%;\n}\n.filter-container-jokes[data-v-5a65d09f] {\n    line-height: 30px;\n    padding: 2%;\n}\n.filter-medical[data-v-5a65d09f] {\n  padding: 0 5% 10% 5%;\n  min-height: 445px;\n}\n.filter-results[data-v-5a65d09f] {\n  padding-top: 2%;\n}\n.filter-info[data-v-5a65d09f] {\n  padding-top: 5%;\n  height: 200px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position-y: bottom;\n  width: 100%;\n  z-index: -10;\n  zoom: 1;\n}\n.filter-info-basic[data-v-5a65d09f] {\n    margin-top: -2%;\n    width: 98%;\n    min-width: 680px;\n}\n.filter-info-line[data-v-5a65d09f] {\n    height: 1px;\n    background-color: #9ec3d061;\n    margin: 15px 5px;\n}\n.filter-avatarFrame[data-v-5a65d09f] {\n  background-color: #fff;\n  width: 130px;\n  height: 130px;\n  border-radius: 50%;\n  margin-top: -30px;\n  text-align: center;\n  border: 1px solid #eceff0;\n  -webkit-box-shadow: #a8b2b9 6px 0 30px -12px;\n  box-shadow: #a8b2b9 6px 0 30px -12px;\n}\n.filter-avatar[data-v-5a65d09f] {\n  width: 120%;\n  height: 117%;\n  margin-left: -10%;\n  margin-top: -16%;\n}\n.filter-text[data-v-5a65d09f] {\n  text-align: center;\n  font-size: 20px;\n  background-color: #f5f5f5;\n  color: #4f4f4f;\n  line-height: 60px;\n}\n.filter-chart[data-v-5a65d09f] {\n  padding: 5%;\n}\n.filter-chart-text[data-v-5a65d09f] {\n    text-align: center;\n    font-size: 20px;\n    background-color: #f5f5f5;\n    color: #4f4f4f;\n    line-height: 60px;\n}\n.filter-tips[data-v-5a65d09f] {\n  font-size: 18px;\n  color: #4f4f4f;\n  padding-bottom: 1%;\n}\n.filter-row[data-v-5a65d09f] {\n  margin-bottom: 4%;\n}\n.filter-card-container[data-v-5a65d09f] {\n  background: -webkit-gradient(linear, left top, right top, from(white), to(#f5f5f5));\n  background: linear-gradient(to right, white, #f5f5f5);\n}\n.filter-card-text[data-v-5a65d09f] {\n  padding: 16px;\n  text-align: center;\n  height: 80px;\n  line-height: 25px;\n}\n.filter-card-image[data-v-5a65d09f] {\n  width: 100%;\n  display: block;\n}\n.appBackground[data-v-5a65d09f] {\n  background-size: 100%;\n  background-repeat: no-repeat;\n  background-position-y: bottom;\n  width: 100%;\n  height: 100%;\n  z-index: -10;\n  zoom: 1;\n}\n",""])}});