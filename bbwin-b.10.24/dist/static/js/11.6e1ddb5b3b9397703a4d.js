webpackJsonp([11],{"8T2r":function(t,e,a){var i=a("eqms");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("279c75ab",i,!0)},MTij:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),n=a.n(i),o=a("Dd8w"),s=a.n(o),l=a("vLgD");var r={data:function(){return{rules:{tel:[{required:!0,message:"请输入手机号",trigger:"blur"}],name:[{required:!0,validator:this.validName,message:"请输入姓名",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱",trigger:["blur","change"]}]},multipleSelection:[],pushData:{dialogTitle:void 0,hospitalId:void 0,tel:void 0,name:void 0,email:void 0,position:void 0,authority:"0",dialogFormVisible:!1},list:null,listLoading:!0}},created:function(){this.pushDataTmp=n()({},this.pushData),this.fetchData()},methods:{validName:function(t,e,a){e&&/^[\u4e00-\u9fa5_a-zA-Z]{2,20}$/.test(e)?a():a(new Error("请输入正确姓名"))},handleSelectionChange:function(t){this.multipleSelection=t},goTest:function(t){this.$router.push({path:"/record/view/choose",query:{babyId:t}})},handleCreate:function(){var t=this;this.pushData=n()({},this.pushDataTmp),this.pushData.dialogTitle="修改密码",this.pushData.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.addEditPopForm.clearValidate()})},changeAuthority:function(t,e){var a=this;this.$confirm(0===e?"确定取消该用户管理员权限吗？":"确定将该用户设置为管理员吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return Object(l.a)({url:"/api/manage/changeAuthority",method:"post",params:{userId:t}})})(t).then(function(){a.$message({message:"操作成功!",type:"success",duration:1e3}),a.fetchData()})}).catch(function(){})},deleteUser:function(t){var e=this;this.$confirm("确定将该用户删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return Object(l.a)({url:"/api/manage/deleteUser",method:"post",params:{userId:t}})})(t).then(function(t){e.$message({message:"删除成功!",type:"success",duration:1e3}),e.fetchData()})}).catch(function(){})},resetPassword:function(t){var e=this;this.$confirm("确定将该用户密码重置为默认密码吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return Object(l.a)({url:"/api/manage/resetPwd",method:"post",params:{userId:t}})})(t).then(function(t){e.$message({message:"重置成功!",type:"success",duration:1e3})})}).catch(function(){})},handleCreateSave:function(){var t=this;this.$refs.addEditPopForm.validate(function(e){if(!e)return!1;var a;(a=t.pushData,Object(l.a)({url:"/api/manage/addUser",method:"post",data:s()({},a)})).then(function(e){t.$message({message:"添加成功!",type:"success",duration:1e3,onClose:function(){t.fetchData(),t.pushData.dialogFormVisible=!1}})})})},fetchData:function(){var t=this;this.list=null,this.listLoading=!0,(this.searchData,Object(l.a)({url:"/api/manage/getUserList",method:"get"})).then(function(e){t.list=e.data,t.listLoading=!1})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"30px",height:"750px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("新增用户")])],1)],1),t._v(" "),a("el-col",{staticClass:"cardTop",attrs:{span:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"Loading",stripe:"",fit:"","highlight-current-row":"","empty-text":"暂无数据"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"name",label:"用户姓名",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tel",label:"手机号",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{on:{click:function(a){t.resetPassword(e.row.userid)}}},[t._v("重置密码")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"角色","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.authority?a("span",[t._v("管理员")]):a("span",[t._v("-")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.authority?a("span",[a("a",{on:{click:function(a){t.changeAuthority(e.row.userid,0)}}},[t._v("取消管理")])]):a("span",[a("a",{on:{click:function(a){t.changeAuthority(e.row.userid,1)}}},[t._v("设为管理员")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{on:{click:function(a){t.deleteUser(e.row.userid)}}},[t._v("删除用户")])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.pushData.dialogTitle,visible:t.pushData.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":"",width:"35%"},on:{"update:visible":function(e){t.$set(t.pushData,"dialogFormVisible",e)}}},[a("el-form",{ref:"addEditPopForm",attrs:{rules:t.rules,model:t.pushData,"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"手机号",prop:"tel"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{property:"登录用户名"},model:{value:t.pushData.tel,callback:function(e){t.$set(t.pushData,"tel",e)},expression:"pushData.tel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{property:"请输入姓名"},model:{value:t.pushData.name,callback:function(e){t.$set(t.pushData,"name",e)},expression:"pushData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{property:"请输入邮箱"},model:{value:t.pushData.email,callback:function(e){t.$set(t.pushData,"email",e)},expression:"pushData.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"职位",prop:"position"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{property:"请输入职位"},model:{value:t.pushData.position,callback:function(e){t.$set(t.pushData,"position",e)},expression:"pushData.position"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"设置为管理员",prop:"authority"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:t.pushData.authority,callback:function(e){t.$set(t.pushData,"authority",e)},expression:"pushData.authority"}},[a("el-option",{attrs:{label:"否",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"是",value:"1"}})],1)],1)],1),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleCreateSave}},[t._v("保存")])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,u,!1,function(t){a("8T2r")},null,null);e.default=c.exports},eqms:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.cardTop{\n  margin-top: 3%;\n}\n",""])}});